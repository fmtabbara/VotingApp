{"version":3,"sources":["components/bar/bar.jsx","App.js","index.js"],"names":["Bar","isDisabled","addVote","background","party","value","vote","className","disabled","type","name","onClick","style","cursor","width","parties","LABOUR","CONSERVATIVES","LIBDEMS","makeRequest","opts","method","headers","body","JSON","stringify","fetch","then","res","ok","catch","err","console","log","App","React","useEffect","Accept","json","data","totalVotes","forEach","item","handleVoteRed","votes","handleVoteBlue","handleVoteYellow","handleTotal","handleIsInitialised","weight","window","innerWidth","useState","isInitialised","total","voteRed","voteBlue","voteYellow","handleIsDisabled","handleSelect","target","checked","left","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.051bbfc5.chunk.js","sourcesContent":["import React from \"react\";\r\nimport \"./styles.css\";\r\n\r\nconst Bar = ({ isDisabled, addVote, background, party, value, vote }) => {\r\n  return (\r\n    <div className=\"vote__container\">\r\n      <input\r\n        className=\"vote__input\"\r\n        disabled={isDisabled}\r\n        type=\"checkbox\"\r\n        name={party}\r\n        onClick={addVote}\r\n        style={{cursor:isDisabled ? \"\" : \"pointer\"}}\r\n      />\r\n      <div className=\"vote__value\">{vote}</div>\r\n      <div>\r\n        <div className=\"vote__party\">{party}</div>\r\n        <div className=\"vote__bar\" style={{ background, width: value }} />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Bar;\r\n","import React from 'react';\r\nimport Bar from './components/bar/bar';\r\nimport './App.css';\r\n\r\nexport const parties = {\r\n  LABOUR: \"LABOUR\",\r\n  CONSERVATIVES: \"CONSERVATIVES\",\r\n  LIBDEMS: \"LIBDEMS\"\r\n};\r\n\r\nconst makeRequest = (party) => {\r\n  const opts = {\r\n    method:\"POST\",\r\n    headers: { 'Content-type': 'application/json'},\r\n    body: JSON.stringify({party}),\r\n  }\r\n  fetch(\"/api\", opts)\r\n    .then(res => res.ok)\r\n    .catch(err => console.log(err))\r\n}\r\n\r\nfunction App() {\r\n  React.useEffect(() => {\r\n    fetch(\"/api\", {Accept: \"application/json\"})\r\n      .then(res => {\r\n        res.json()\r\n          .then(data => {\r\n            let totalVotes = 0;\r\n            data.forEach(item => {\r\n              if (item.name === parties.LABOUR) {\r\n                handleVoteRed(item.votes)\r\n                totalVotes += item.votes\r\n              } else if (item.name === parties.CONSERVATIVES) {\r\n                handleVoteBlue(item.votes)\r\n                totalVotes += item.votes\r\n              } else if (item.name === parties.LIBDEMS) {\r\n                handleVoteYellow(item.votes)\r\n                totalVotes += item.votes\r\n              }\r\n            })\r\n            handleTotal(totalVotes);\r\n          })\r\n          .catch(err => console.log(err));\r\n          handleIsInitialised(true)\r\n      })\r\n      .catch(err => console.log(err));\r\n  }, []);\r\n  const weight = window.innerWidth\r\n  const [isInitialised, handleIsInitialised] = React.useState(false)\r\n  const [total, handleTotal] = React.useState(1);\r\n  const [voteRed, handleVoteRed] = React.useState(0);\r\n  const [voteBlue, handleVoteBlue] = React.useState(0);\r\n  const [voteYellow, handleVoteYellow] = React.useState(0);\r\n  const [isDisabled, handleIsDisabled] = React.useState(false)\r\n\r\n  const addVote = (party) => {\r\n    if (party === parties.LABOUR) {\r\n      makeRequest(parties.LABOUR)\r\n      return handleVoteRed(voteRed + 1);\r\n    } else if (party === parties.CONSERVATIVES) {\r\n      makeRequest(parties.CONSERVATIVES)\r\n      return handleVoteBlue(voteBlue + 1);\r\n    } else if (party === parties.LIBDEMS) {\r\n      makeRequest(parties.LIBDEMS)\r\n      handleVoteYellow(voteYellow + 1);\r\n    }\r\n  };\r\n\r\n  const setDisabled = () => {\r\n    handleIsDisabled(true);\r\n  };\r\n\r\n  const handleSelect = ({ target: { name, checked } }) => {\r\n    if (checked) {\r\n      handleTotal(total + 1);\r\n      addVote(name);\r\n      setDisabled(true);\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"App\">\r\n      <div className=\"content\" style={{left: weight/4}}>\r\n        <div className=\"title\">The People's Poll</div>\r\n        {isInitialised ?\r\n        <div className=\"bar-chart\">\r\n          <Bar\r\n            isDisabled={isDisabled}\r\n            addVote={handleSelect}\r\n            party={parties.CONSERVATIVES}\r\n            vote={voteBlue}\r\n            background=\"#0066ff\"\r\n            value={(voteBlue / total) * weight}\r\n          />\r\n          <Bar\r\n            isDisabled={isDisabled}\r\n            addVote={handleSelect}\r\n            party={parties.LABOUR}\r\n            background=\"#E4003B\"\r\n            vote={voteRed}\r\n            value={(voteRed / total) * weight}\r\n          />\r\n          <Bar\r\n            isDisabled={isDisabled}\r\n            addVote={handleSelect}\r\n            party={parties.LIBDEMS}\r\n            vote={voteYellow}\r\n            background=\"#FFAE27\"\r\n            value={(voteYellow / total) * weight}\r\n          />\r\n        </div>\r\n        : \"Loading...\"}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}